<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>íš¡ìŠ¤í¬ë¡¤ íŒ¨ëŸ´ë™ìŠ¤</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        overflow-x: hidden; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ ë°©ì§€ */
        font-family: Arial, sans-serif;
      }

      /* ì¼ë°˜ì ì¸ ì„¸ë¡œ ìŠ¤í¬ë¡¤ ì„¹ì…˜ */
      .vertical-section {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-weight: bold;
        background: #ddd;
        border-bottom: 2px solid #bbb;
      }

      /* ì»¨í…Œì´ë„ˆ */
      .container {
        display: flex;
        flex-direction: column;
        width: 100vw;
        height: 500vh; /* ì¶©ë¶„í•œ ìŠ¤í¬ë¡¤ ì˜ì—­ í™•ë³´ */
      }

      /* íŒ¨ëŸ´ë™ìŠ¤ê°€ ì ìš©ë  ê°€ë¡œ ìŠ¤í¬ë¡¤ ì„¹ì…˜ */
      .section {
        display: flex;
        width: 100vw;
        height: 50vh;
        position: relative;
        overflow: hidden;
      }

      /* íŒ¨ë„ë“¤ì„ ê°ì‹¸ëŠ” ê°€ë¡œ ìŠ¤í¬ë¡¤ ì»¨í…Œì´ë„ˆ */
      .parallax-container {
        display: flex;
        width: 300vw; /* ê°€ë¡œë¡œ ë°°ì¹˜ */
        height: 100%;
        position: absolute;
        top: 0;
        left: 0;
        transition: transform 0.1s linear;
      }

      /* ê°œë³„ íŒ¨ë„ */
      .panel {
        width: 100vw;
        height: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2rem;
        font-weight: bold;
        border: 1px solid #ddd;
      }

      /* ì„¹ì…˜ ê°œë³„ ìŠ¤íƒ€ì¼ */
      .top {
        background: #fff;
      }

      .bottom {
        background: #f8f8f8;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- ìŠ¤í¬ë¡¤ ì „ -->
      <div class="vertical-section">ìƒë‹¨ ì¼ë°˜ ì„¹ì…˜</div>

      <!-- ìƒë‹¨ íš¡ìŠ¤í¬ë¡¤ ì„¹ì…˜ -->
      <div class="section top">
        <div class="parallax-container" id="topParallax">
          <div class="panel">íŒ¨ë„ 1</div>
          <div class="panel">íŒ¨ë„ 2</div>
          <div class="panel">íŒ¨ë„ 3</div>
        </div>
      </div>

      <!-- í•˜ë‹¨ íš¡ìŠ¤í¬ë¡¤ ì„¹ì…˜ -->
      <div class="section bottom">
        <div class="parallax-container" id="bottomParallax">
          <div class="panel">íŒ¨ë„ 4</div>
          <div class="panel">íŒ¨ë„ 5</div>
          <div class="panel">íŒ¨ë„ 6</div>
        </div>
      </div>

      <!-- ìŠ¤í¬ë¡¤ í›„ -->
      <div class="vertical-section">í•˜ë‹¨ ì¼ë°˜ ì„¹ì…˜</div>
    </div>

    <script>
      // âœ… 1ë‹¨ê³„: ê¸°ë³¸ì ì¸ ìŠ¤í¬ë¡¤ ê°ì§€í•˜ê¸°
      //   ğŸ‘‰ ëª©í‘œ
      //   ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¥¼ ê°ì§€í•´ì„œ window.scrollY ê°’ì„ ì½˜ì†”ì— ì¶œë ¥í•´ ë³´ì.
      //   ğŸ‘‰ í•  ì¼
      //   JavaScriptì—ì„œ window.addEventListener("scroll", callback)ì„ ì‚¬ìš©í•´ì„œ ìŠ¤í¬ë¡¤ì„ ê°ì§€í•œë‹¤.
      //   í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜(window.scrollY)ë¥¼ console.log()ë¡œ ì¶œë ¥í•œë‹¤.

      // âœ… 2ë‹¨ê³„: íŠ¹ì • ì„¹ì…˜ì˜ ìœ„ì¹˜ êµ¬í•˜ê¸°
      //   ğŸ‘‰ ëª©í‘œ
      //   .top ì„¹ì…˜ì˜ ì‹œì‘ ìœ„ì¹˜(offsetTop)ì™€ ëë‚˜ëŠ” ìœ„ì¹˜(offsetTop + height)ë¥¼ êµ¬í•´ì„œ ì½˜ì†”ì— ì¶œë ¥í•´ ë³´ì.
      //   ğŸ‘‰ í•  ì¼
      //   .top ì„¹ì…˜ì„ document.querySelector()ë¡œ ì„ íƒí•œë‹¤.
      //   .top ì„¹ì…˜ì´ í˜ì´ì§€ì—ì„œ ì‹œì‘í•˜ëŠ” ìœ„ì¹˜(.offsetTop)ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
      //   .top ì„¹ì…˜ì˜ ëë‚˜ëŠ” ìœ„ì¹˜ë¥¼ offsetTop + offsetHeightë¡œ ê³„ì‚°í•œë‹¤.
      //   ìŠ¤í¬ë¡¤í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ê°’ë“¤ì„ ì½˜ì†”ì— ì¶œë ¥í•´ ë³¸ë‹¤.

      // âœ… 3ë‹¨ê³„: íŠ¹ì • êµ¬ê°„ì—ì„œë§Œ ì‹¤í–‰ë˜ë„ë¡ ì¡°ê±´ ì¶”ê°€í•˜ê¸°
      //   ğŸ‘‰ ëª©í‘œ
      //   ìŠ¤í¬ë¡¤ì´ .top ì„¹ì…˜ êµ¬ê°„ ì•ˆì— ìˆì„ ë•Œë§Œ ì½˜ì†”ì— "íš¡ìŠ¤í¬ë¡¤ êµ¬ê°„!"ì´ë¼ê³  ì¶œë ¥í•´ ë³´ì.
      //   ğŸ‘‰ í•  ì¼
      //   ìŠ¤í¬ë¡¤ ê°’ì´ .top ì„¹ì…˜ì˜ ì‹œì‘ ìœ„ì¹˜ë³´ë‹¤ í¬ê³ , ë ìœ„ì¹˜ë³´ë‹¤ ì‘ì€ ê²½ìš°ë§Œ ì‹¤í–‰ë˜ë„ë¡ ì¡°ê±´ë¬¸(if)ì„ ì¶”ê°€í•œë‹¤.

      // âœ… 4ë‹¨ê³„: ì„¸ë¡œ ìŠ¤í¬ë¡¤ ë§‰ê³  ê°€ë¡œ ì´ë™ ì ìš©í•˜ê¸°
      //   ğŸ‘‰ ëª©í‘œ
      //   .top êµ¬ê°„ì—ì„œëŠ” window.scrollYê°€ ì•„ë‹Œ translateX()ë¥¼ ì´ìš©í•´ì„œ #topParallaxë¥¼ ì´ë™ì‹œí‚¤ì.
      //   ğŸ‘‰ í•  ì¼
      //   .top ì„¹ì…˜ ì•ˆì— ìˆëŠ” #topParallaxë¥¼ ê°€ì ¸ì˜¨ë‹¤.
      //   .top ì„¹ì…˜ì´ ì‹œì‘ëœ ì´í›„ì˜ ìŠ¤í¬ë¡¤ ê°’ì„ ê³„ì‚°í•œë‹¤.
      //   #topParallaxì˜ transform: translateX() ê°’ì„ ì¡°ì •í•´ì„œ ê°€ë¡œë¡œ ì´ë™ì‹œí‚¨ë‹¤.

      window.addEventListener("scroll", function () {
        // 1ë‹¨ê³„
        // console.log("í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ : ", window.scrollY);

        // 2ë‹¨ê³„
        let topSection = document.querySelector(".top");
        let topStart = topSection.offsetTop;
        let topEnd = topStart + topSection.offsetHeight;

        // console.log(`.top ì‹œì‘ ìœ„ì¹˜: ${topStart}px, ë ìœ„ì¹˜: ${topEnd}px`);

        // 3ë‹¨ê³„
        let scrollY = window.scrollY;

        if (scrollY >= topStart && scrollY < topEnd) {
          let progress = (scrollY - topStart) / topSection.offsetHeight; // ì§„í–‰ë¥  (0~1)
          let translateXValue = progress * 100; // ê°€ë¡œ ì´ë™ ê±°ë¦¬ ì¡°ì •

          topParallax.style.transform = `translateX(-${translateXValue}vw)`;
        }
      });
    </script>
  </body>
</html>
